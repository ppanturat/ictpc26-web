{% extends "base.html" %}

{% block body_class %}theme-black{% endblock %}

{% block header_image %}
{{ url_for('static', filename='images/bg-black.png') }}
{% endblock %}

{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='rules-style.css') }}">
{% endblock %}

{% block content %}

<div class="layout-wrapper">
    <a href="{{ url_for('home') }}" class="back-btn">&lt; Back</a>
</div>

<div class="title-box">
    <span class="corner tl"></span><span class="corner tr"></span>
    <span class="corner bl"></span><span class="corner br"></span>
    <h1 class="main-title">Rules & Guidelines</h1>
</div>

<div class="rules-grid">

    <div class="tabs-sidebar">
        <button class="tab-btn active" onclick="openTab('Team')">Team</button>
        <button class="tab-btn" onclick="openTab('Guidelines')">Guidelines</button>
        <button class="tab-btn" onclick="openTab('Competition')">Competition</button>
        <button class="tab-btn" onclick="openTab('Judgment')">Judgment</button>
        <button class="tab-btn" onclick="openTab('Ranking')">Ranking</button>
        <button class="tab-btn" onclick="openTab('Inquiries')">Inquiries</button>
        <button class="tab-btn" onclick="openTab('Hardware')">Hardware</button>
        <button class="tab-btn" onclick="openTab('Software')">Software</button>
        <button class="tab-btn" onclick="openTab('Awards')">Awards</button>
    </div>

    <div class="right-col">
        <div class="content-container tab-display">

            <div id="Team" class="tab-content" style="display: block;">
                <h2 class="section-title">Team Requirements</h2>
                <p>
                    Each team must consist of <strong>1 to 3 individuals</strong> from any program or year.
                    Participants must be enrolled in the <strong>B.Sc. in ICT</strong> or <strong>B.Sc. in
                        DST</strong>
                    programs. (Teams can be cross-year and cross-disciplinary.)
                </p>
                <p>
                    Teams that do not meet this requirement will be <strong>disqualified from ranking</strong>,
                    ineligible for rewards, and will <strong>forfeit the right to advance</strong> in the
                    competition.
                    However, such teams may still participate <strong>with prior approval</strong> from the
                    competition
                    organizers.
                </p>
            </div>

            <div id="Guidelines" class="tab-content">
                <h2 class="section-title">Guidelines</h2>
                <h4><strong>1. Printed Materials</strong></h4>
                <p>
                    Each team is allowed to bring up to <strong>25 pages</strong> of printed reference materials
                    (<em>single-sided</em> on Letter or A4).
                    <strong>Pages must be numbered, and the team name must be on the first page.</strong>
                    Text and illustrations must be readable from 0.5 meters.
                    Materials must be contained in a folder or binder <em>labeled with the team name.</em>
                </p>

                <h4><strong>2. Allowed Items</strong></h4>
                <p>
                    Teams may bring stationery (pens, pencils, erasers, rulers, protractors, etc.).
                    <strong>Candy</strong> is the only food allowed.
                    Mascot dolls, <em>yadom</em> (inhalers), or one English-to-Thai dictionary are permitted but will be
                    <strong>inspected</strong> before the session.
                </p>

                <h4><strong>3. Prohibited Items</strong></h4>
                <p>
                    All electronic devices (phones, digital watches, calculators, mice, keyboards) are
                    <strong>strictly prohibited</strong>.
                    Communication devices must be switched off and left in the preparation room.
                </p>

                <h4><strong>4. Rules & Conduct</strong></h4>
                <ul>
                    <li><strong>Communication:</strong> Only allowed with team members and staff. During the
                        competition, questions about the problems must be asked via the submission system (DOMjudge).
                    </li>
                    <li><strong>Restroom:</strong> Allowed with supervision (max 15 mins).</li>
                    <li><strong>Internet:</strong> Strictly prohibited.</li>
                    <li><strong>Entry:</strong> Participants must enter the room empty-handed.</li>
                </ul>
            </div>
            <div id="Competition" class="tab-content">
                <h2 class="section-title">Competition</h2>
                <p>
                    The competition lasts <strong>3 hours</strong>. Teams will write programs to solve problems
                    provided
                    in English.
                    Teams can use <strong>C, C++, Python, or Java</strong> and may switch languages between
                    problems.
                </p>
                <h4>Live Scoreboard</h4>
                <p>
                    A live scoreboard will display rankings during the contest. It will be <strong>frozen during the
                        last 30 minutes</strong>.
                    Teams will be awarded balloons for each solved problem.
                </p>
                <h4>Disqualification</h4>
                <p>
                    Teams may be disqualified for jeopardizing the contest, including dislodging extension
                    cords,
                    unauthorized modification of materials, distracting behavior, or affecting other teams.
                </p>
            </div>
            <div id="Judgment" class="tab-content">
                <h2 class="section-title">Judgment</h2>
                <p>
                    A problem is considered solved when the submission (run) is <strong>accepted</strong> by the
                    judges.
                    Judges will test programs using a secret set of test data.
                </p>
                <p><strong>Rejected Runs</strong></p>
                <ul>
                    <li><strong>Runtime Error:</strong> Program crashed.</li>
                    <li><strong>Time Limit Exceeded:</strong> Program took too long.</li>
                    <li><strong>Wrong Answer:</strong> Incorrect output or presentation errors (e.g., extra
                        whitespace).
                    </li>
                </ul>
                <p>
                    <strong>Clarifications:</strong> Contestants may submit claims of ambiguity via the DOMjudge
                    system.
                    Judges' decisions are final.
                </p>
            </div>
            <div id="Ranking" class="tab-content">
                <h2 class="section-title">Ranking Criteria</h2>
                <p>
                    Teams are ranked by the <strong>most problems solved</strong>.
                </p>
                <p>
                    If tied, teams are ranked by <strong>least total time</strong>.
                    Total time is the sum of time elapsed for each solved problem plus a <strong>20-minute
                        penalty</strong> for every rejected run on that problem.
                </p>
                <p>
                    If still tied, the time of the last solved problem (without penalty) is used as a tiebreaker.
                </p>
            </div>
            <div id="Inquiries" class="tab-content">
                <h2 class="section-title">Inquiries</h2>
                <p>
                    All inquiries, concerns, and protests must be raised with the Contest Director and Chief of
                    Judges
                    within <strong>30 minutes</strong> after the competition ends.
                </p>
                <p>
                    Unforeseen circumstances will be handled on a case-by-case basis by the organizers.
                </p>
            </div>
            <div id="Hardware" class="tab-content">
                <h2 class="section-title">Hardware Specs</h2>
                <ul>
                    <li><strong>CPU:</strong> Intel® Core™ i7-10700 (16 cores)</li>
                    <li><strong>RAM:</strong> 16 GB</li>
                    <li><strong>OS:</strong> Ubuntu 24.04.1 LTS</li>
                </ul>
            </div>
            <div id="Software" class="tab-content">
                <h2 class="section-title">Software</h2>
                <p>The following development environments will be available:</p>
                <ul>
                    <li><strong>Visual Studio Code</strong></li>
                    <li><strong>Eclipse IDE</strong></li>
                    <li><strong>IntelliJ IDEA</strong></li>
                    <li><strong>Vim</strong></li>
                    <li><strong>GNU nano</strong></li>
                </ul>
            </div>
            <div id="Awards" class="tab-content">
                <h2 class="section-title">Awards</h2>
                <p>Coming Soon...</p>
            </div>

        </div>
    </div>

    <div class="mobile-nav-controls">
        <button class="nav-btn prev-btn" onclick="changeTab(-1)">&lt; Previous</button>
        <button class="nav-btn next-btn" onclick="changeTab(1)">Next &gt;</button>
    </div>

</div>

<div style="height: 60px;"></div>

<script>
    const tabList = [ 'Team', 'Guidelines', 'Competition', 'Judgment', 'Ranking', 'Inquiries', 'Hardware', 'Software', 'Awards' ]
    let currentIndex = 0

    function openTab(tabName) {
        currentIndex = tabList.indexOf(tabName)
        updateUI()
    }

    function changeTab(direction) {
        let newIndex = currentIndex + direction
        if (newIndex < 0) return
        if (newIndex >= tabList.length) return
        currentIndex = newIndex
        updateUI()
    }

    function updateUI() {
        // Hide all content
        let contents = document.getElementsByClassName("tab-content")
        for (let i = 0; i < contents.length; i++) {
            contents[ i ].style.display = "none"
        }
        // Deactivate sidebar buttons
        let buttons = document.getElementsByClassName("tab-btn")
        for (let i = 0; i < buttons.length; i++) {
            buttons[ i ].className = buttons[ i ].className.replace(" active", "")
        }
        // Show current content
        let currentTabName = tabList[ currentIndex ]
        if (document.getElementById(currentTabName)) {
            document.getElementById(currentTabName).style.display = "block"
        }
        // Activate button
        if (buttons[ currentIndex ]) {
            buttons[ currentIndex ].className += " active"
        }

        // Mobile Button Visibility
        document.querySelector('.prev-btn').style.visibility = (currentIndex === 0) ? 'hidden' : 'visible'
        document.querySelector('.next-btn').style.visibility = (currentIndex === tabList.length - 1) ? 'hidden' : 'visible'
    }

    // Initialize immediately
    document.addEventListener("DOMContentLoaded", function () {
        updateUI()
    });
</script>
{% endblock %}